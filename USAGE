
DWI Pipeline
========================

Pipeline adapted from the SCIL Tractoflow pipeline (https://github.com/scilus/tractoflow.git) [1].
Made for use on newborn diffusion MRI data.

This pipeline performs tractography on newborn dMRI data using already segmented WM and brain
mask. Those mask can come from any structural segmentation pipeline (dHCP, Infant-Freesurfer,
Neocivet, etc.). It is RECOMMENDED to provide an already brain-extracted T2w volume, but if
it is not the case, please use the --run_bet_t2w option.

To simply perform tractography, use -profile tracking. The pipeline will only perform the tracking
related processes. 

It is possible to also run a connectivity analysis following tracking. Using -profile connectomics, 
the pipeline will perform connectivity analysis based on atlas segmentation. The connectomics processes 
are imported from the Connectoflow pipeline (https://github.com/scilus/connectoflow.git). If you are using
only the connectomics profile, you need to provide all the necessary files to transform labels, run commit,
run afd_fixel and compute metrics (see structure below).

Both analysis (tracking and connectomics) can be performed one after another automatically (using
-profile tracking,connectomics). The pipeline will then reorganised channel to provide the correct inputs.

[1] Theaud, G., Houde, J.-C., Bor√©, A., Rheault, F., Morency, F., Descoteaux, M.,
    TractoFlow: A robust, efficient and reproducible diffusion MRI pipeline
    leveraging Nextflow & Singularity, NeuroImage,
    https://doi.org/10.1016/j.neuroimage.2020.116889.


Run Tracking Pipeline

nextflow run main.nf [OPTIONAL_ARGUMENTS] --input [input_folder] -profile tracking

Run Connectomics Pipeline

nextflow run main.nf [OPTIONAL_ARGUMENTS] --input [input_folder] -profile connectomics

Run Both Pipeline

nextflow run main.nf [OPTIONAL_ARGUMENTS] --input [input_folder] -profile tracking,connectomics